import"./modulepreload-polyfill-B5Qt9EMX.js";import{A as i}from"./config-CEVxPal-.js";window.doLogin=async function(){const r=document.getElementById("email").value.trim(),a=document.getElementById("pass").value.trim(),t=document.getElementById("error"),s=document.getElementById("btnLogin");if(t.textContent="",!r||!a){t.textContent="Ingresa email y contrase√±a";return}s.disabled=!0;try{const e=`${i}/auth/login`;console.log("üîç Intentando login en:",e);const o=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:a})});console.log("üîç Respuesta del servidor:",o.status,o.statusText);const l=await o.text();let n;try{n=l?JSON.parse(l):{}}catch{t.textContent="El servidor no respondi√≥ correctamente. Verifica que la URL del backend est√© configurada (VITE_API_URL).";return}if(!o.ok)throw new Error(n.error||"Error al iniciar sesi√≥n");localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(n.user)),localStorage.setItem("logged","yes"),window.location.href="/panel.html"}catch(e){e.message==="Failed to fetch"||e.name==="TypeError"?t.textContent="No se pudo conectar con el servidor. Verifica tu conexi√≥n y que la URL del backend (VITE_API_URL) est√© configurada en Vercel.":t.textContent=e.message||"Usuario o contrase√±a incorrectos"}finally{s.disabled=!1}};localStorage.getItem("logged")==="yes"&&localStorage.getItem("token")&&(window.location.href="/panel.html");
